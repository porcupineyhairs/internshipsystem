{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}个人实习信息{% endblock %}
{% block head %}{{ super() }}{% endblock %}<!--先执行父模板-->

{% block page_content %}

    <table align="center" border="2" class="table-bordered">
        <caption>
            <h1>我的实习信息
            <!-- 没有下拉菜单
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggled btn-sm"
                            data-toggle="dropdown">编辑<span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        {% if current_user.can(Permission.STU_INTERN_EXPORT) %}
                            <li><a href="#">审核通过</a></li>
                        {% endif %}
                        <li><a href="#">导出到Excel</a></li>
                        <li><a href="{{ url_for('.editStuIntern', comId=comId) }}">修改</a></li>
                        <li><a href="#">删除</a></li>
                    </ul>
                </div>
                -->
            </h1>
        </caption>
        
        <!--
        <form method="POST" role="form" >
        -->
    

        <!-- 此页面仅能修改实习信息
        <tr>
            <td colspan="6" height="50">一、学生信息</td>
        </tr>
        <tr>
            <th width="200">学号</th>
            <td width="400" height="50" colspan="3">
                {{ stuform.stuId(class="form-control",required='', value=student.stuId) }}
            </td>
            <th width="200">姓名</th>
            <td width="400" height="50" colspan="3">
            {{ stuform.stuName(class="form-control",required='', value=student.stuName) }}</td>
        </tr>
        <tr>
            <th width="200">性别</th>
            <td width="400" height="50" colspan="3">
                {{ stuform.sex(class="form-control",required='', value=student.sex) }}
            </td>
            <th width="200">专业班级</th>
            <td width="400" height="50" colspan="3">
            {{ stuform.major(class="form-control",required='', value=student.major) }}
            {{ stuform.classes(class="form-control",required='', value=student.classes) }}
            班</td>
        </tr>
        <tr>
            <td width="200" colspan="6" height="50">二、实习企业信息</td>
        </tr>
        <tr>
            <th>企业名称</th>
            <td height="50" width="400" colspan="5">
            {{ comform.comName(class="form-control",required='', value=comInfor.comName) }}</td>
        </tr>
        <tr>
            <th>企业地址</th>
            <td height="50" width="400" colspan="5">
            {{ comform.comAddress(class="form-control",required='', value=comInfor.comAddress) }}
            </td></td>
        </tr>
        <tr>
            <th>企业简介</th>
            <td height="200" width="400" colspan="5">
            {{ comform.comBrief(class="form-control",required='', value=combrief ) }}</td>
        </tr>
        -->

        <tr>
            <td colspan="6" height="50">一、学生信息</td>
        </tr>
        <tr>
            <th width="200">学号</th>
            <td width="400" height="50" colspan="3">
                {{student.stuId }}
            </td>
            <th width="200">姓名</th>
            <td width="400" height="50" colspan="3">{{ student.stuName }}</td>
        </tr>
        <tr>
            <th width="200">性别</th>
            <td width="400" height="50" colspan="3">
                {{ student.sex }}
            </td>
            <th width="200">专业班级</th>
            <td width="400" height="50" colspan="3">{{ student.major }}{{ student.classes }}班</td>
        </tr>
        <tr>
            <td width="200" colspan="6" height="50">二、实习企业信息</td>
        </tr>
        <tr>
            <th>企业名称</th>
            <td height="50" width="400" colspan="5">{{ comInfor.comName }}</td>
        </tr>
        <tr>
            <th>企业地址</th>
            <td height="50" width="400" colspan="5">{{ comInfor.comAddress }}</td>
        </tr>
        <tr>
            <th>企业简介</th>
            <td height="200" width="400" colspan="5">{{ comInfor.comBrief }}</td>
        </tr>
        <tr>
            <td width="200"  height="50">三、实习岗位信息</td>
        </tr>
        <form method="POST" action="/editStuIntern_intern">
        <tr>
            <th>实习地点</th>
            <td width="400" height="50" colspan="5">
            <input type="hidden" name="comId" value="{{ comInfor.comId }}">
            <input type="hidden" name="internId" value="{{ internship.Id }}">
            <input type="hidden" name="stuId" value="{{ student.stuId }}">
            {{ internform.address(class="form-control",required='', value=internship.address) }}</td></td>
        </tr>
        <tr>
            <th>实习期间</th>
            <td width="400" height="50" colspan="5">
            {{ internform.start(required='', value=internship.start) }}至
            {{ internform.end(required='', value=internship.end) }}</td>
            </td>
        </tr>
        <tr>
            <th>工作任务</th>
            <td width="400" height="200" colspan="5">
            <!-- it's a magic -->
            {% set temp_task = internform.task.process_data(internship.task) %}
            {{ internform.task(class="form-control",required='') }}</td>
        </tr>
        <tr><td colspan="6" align="center">{{ internform.submit(class="btn btn-danger",type="submit",id='finish', value="确定修改") }}</td></tr>
        </form>
        <tr>
            <td width="200" colspan="6" height="50">四、实习指导老师</td>
        </tr>
        <table align="center" border="2" class="table-bordered">
            <tr>
                <th height="50" colspan="6">企业指导老师</th>
            </tr>
            <tr>
                <td height="50" width="300">姓名</td>
                <td height="50" width="300">职务/职称</td>
                <td height="50" width="300">电话</td>
                <td height="50" width="300">E-mail</td>
            </tr>
            {% for tea in comdirtea %}
                {% if tea.teaName %}
                    <tr>
                        <form method="POST" action="/editStuIntern_comdirtea" >
                        {{ comdirteaform.hidden_tag() }}
                        <input type="hidden" name="comId" value="{{ comInfor.comId }}">
                        <input type="hidden" name="start" value="{{ internship.start }}">
                        <input type="hidden" name="internId" value="{{ internship.Id }}">
                        <input type="hidden" name="stuId" value="{{ student.stuId }}">
                        <input type="hidden" name="Id" value="{{ tea.Id }}">
                        <td height="50">{{ comdirteaform.cteaName(required='', value=tea.teaName) }}</td>
                        <td height="50">{{ comdirteaform.cteaDuty(required='', value=tea.teaDuty) }}</td>
                        <td height="50">{{ comdirteaform.cteaPhone(required='', value=tea.teaPhone) }}</td>
                        <td height="50" colspan="2">{{ comdirteaform.cteaEmail(required='', value=tea.teaEmail) }}</td>
                         {{ comdirteaform.csrf_token }} 
                        <td>{{ comdirteaform.submit(class="btn btn-danger",type="submit", value="确定修改") }}</td>
                        </form>
                    </tr>
                {% endif %}
            {% endfor %}
        </table>
        <table align="center" border="2" class="table-bordered">
            <!-- 校内指导老师在"个人信息--学生信息"处修改 -->
            <tr>
                <th height="50" colspan="6">校内指导老师</th>
            </tr>
            <tr>
                <td height="50" width="240">教工号</td>
                <td height="50" width="240">姓名</td>
                <td height="50" width="240">职务/职称</td>
                <td height="50" width="240">电话</td>
                <td height="50" width="240">E-mail</td>
            </tr>
            {% for tea in schdirtea %}
                {% if tea.teaName %}
                    <tr>
                        <td height="50">{{ tea.teaId }}</td>
                        <td height="50">{{ tea.teaName }}</td>
                        <td height="50">{{ tea.teaDuty }}</td>
                        <td height="50">{{ tea.teaPhone }}</td>
                        <td height="50" colspan="2">{{ tea.teaEmail }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        
            <!--
            <tr><td><button type="submit" class="btn btn-success" >确认修改</button></td></tr>
            <tr>
            -->
                <td width="200" colspan="6" height="50">五、审核意见</td>
            </tr>
            <tr>
                <th width="200">专业意见</th>
                <td height="200" colspan="5">
                    {% if internship.opinion %}
                        {{ internship.opinion }}
                    {% else %}
                        暂无
                    {% endif %}
                </td>
            </tr>
        </table>
    </table>
    <br>
    <tr><td><a href="{{ url_for('.stuIntern',internId=internship.Id, comId=comInfor.comId, stuId=student.stuId) }}"><button class="btn btn-primary">返回</button></a>
    <!--
    <tr><button type="submit" class="btn btn-success" id="toggle" onClick="select_all()" value=修改></button></tr>
    -->
    <!--
    </form>
    -->

{% endblock %}
