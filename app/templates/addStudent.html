{% extends "base.html" %}

{% block title %}添加学生信息{% endblock %}
{% block head %}
    {{ super() }}
    <script>
        $(document).ready(function () {
            var i = 1;
            $("#addTea").click(function () {
                $(".teaForm:first").clone(true).insertAfter(".teaForm:last");
                $(".teaForm:last").slideDown();
                i++;
                $(".teaForm .form-control").eq(i + i + i + i + i).attr({name: "teaId" + i});
                $(".teaForm .form-control").eq(i + i + i + i + i + 1).attr({name: "teaName" + i});
                $(".teaForm .form-control").eq(i + i + i + i + i + 2).attr({name: "teaDuty" + i});
                $(".teaForm .form-control").eq(i + i + i + i + i + 3).attr({name: "teaPhone" + i});
                $(".teaForm .form-control").eq(i + i + i + i + i + 4).attr({name: "teaEmail" + i});
                if (i > 1) {
                    $("#delTea").show();
                    // $("#addTea").hide();
                }
            });
            $("#delTea").click(function () {
                i--;
                $(".teaForm:last").remove();
                if (i == 1) {
                    $("#delTea").slideUp();
                }
            });
            $("#finish").click(function () {
                $(".teaForm .form-control").eq(5).attr({name: "teaId" + 1});
                $(".teaForm .form-control").eq(6).attr({name: "teaName" + 1});
                $(".teaForm .form-control").eq(7).attr({name: "teaDuty" + 1});
                $(".teaForm .form-control").eq(8).attr({name: "teaPhone" + 1});
                $(".teaForm .form-control").eq(9).attr({name: "teaEmail" + 1});

                $(".buttonStd").click();
                $(".buttonTea").click();
            });
        });
    </script>
{% endblock %}
{% block page_content %}
    <div class="panel">
        <div class="panel-body">
            <div class="teaForm" style="display: None">
                {{ schdirteaform.hidden_tag() }}
                {{ schdirteaform.steaId.label }} {{ schdirteaform.steaId(class="form-control",required='',oninput="setCustomValidity('')") }}
                {{ schdirteaform.steaName.label }} {{ schdirteaform.steaName(class="form-control",required='',placeholder="",
            pattern="[\u4e00-\u9fa5]{2,6}",oninvalid="setCustomValidity('请输入正确的姓名')",oninput="setCustomValidity('')") }}
                {{ schdirteaform.steaDuty.label }} {{ schdirteaform.steaDuty(class="form-control",required='',placeholder="",
            oninvalid="setCustomValidity('')",oninput="setCustomValidity('')") }}
                {{ schdirteaform.steaPhone.label }} {{ schdirteaform.steaPhone(class="form-control",required='',placeholder="") }}
                {{ schdirteaform.steaEmail.label }} {{ schdirteaform.steaEmail(class="form-control",required='',placeholder="") }}
                </br></br>
            </div>

            <form method="POST" role="form" id="S1">
                <div class="page-header">
                    <h1>欢迎您，请填写学生信息</h1>
                </div>
                <div>
                    {{ stuform.hidden_tag() }}
                    {{ stuform.stuId.label }}{{ stuform.stuId(class="form-control",required='',placeholder="", pattern="[0-9]{12}",oninvalid="setCustomValidity('请输入正确的学号')",oninput="setCustomValidity('')") }}
                    {{ stuform.stuName.label }}{{ stuform.stuName(class="form-control",required='',placeholder="", pattern="[\u4e00-\u9fa5]{2,6}",oninvalid="setCustomValidity('请输入正确的姓名')",oninput="setCustomValidity('')") }}
                    {{ stuform.sex.label }}{{ stuform.sex(class='form-control',default='男') }}
                    {{ stuform.institutes.label }}{{ stuform.institutes(class='form-control',default='计算机与网络安全学院') }}
                    {{ stuform.grade.label }}{{ stuform.grade(class="form-control",required='') }}
                    {{ stuform.major.label }}{{ stuform.major(class='form-control',required='') }}
                    {{ stuform.classes.label }}{{ stuform.classes(class='form-control',required='') }}
                </div>


                <h3>校内指导老师信息</h3>
                <div class="teaForm">
                    {{ schdirteaform.hidden_tag() }}
                    {{ schdirteaform.steaId.label }} {{ schdirteaform.steaId(class="form-control",oninvalid="setCustomValidity('请输入正确的教师工号')",oninput="setCustomValidity('')") }}
                    {{ schdirteaform.steaName.label }} {{ schdirteaform.steaName(class="form-control",required='',placeholder="", pattern="[\u4e00-\u9fa5]{2,6}",oninvalid="setCustomValidity('请输入正确的姓名')",oninput="setCustomValidity('')") }}
                    {{ schdirteaform.steaDuty.label }} {{ schdirteaform.steaDuty(class="form-control",required='',placeholder="", oninvalid="setCustomValidity('')",oninput="setCustomValidity('')") }}
                    {{ schdirteaform.steaPhone.label }} {{ schdirteaform.steaPhone(class="form-control",required='',placeholder="") }}
                    {{ schdirteaform.steaEmail.label }} {{ schdirteaform.steaEmail(class="form-control",required='',placeholder="") }}
                    </br></br>
                </div>
                <input type="button" id="addTea" class="btn" value="添加老师">
                <input type="button" id="delTea" class="btn" value="删除老师" style="display: none">
                </br></br>
                {{ stuform.submit(class="btn btn-success",type="submit",id='finish') }}
            </form>
        </div>
    </div>
    <br><br><br>
{% endblock %}